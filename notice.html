<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>   चन्दननाथ नगरपालिकाको - वडा नम्बर ४ सूचनाहरू</title>
    <link rel="stylesheet" href="styles.css">
    <link rel="stylesheet" href="style/contact.css">
    <link rel="icon" type="image/png" href="./img/nepalgovlogo.png"> 

    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css"></head>
<body>
    <header>
        <nav class="navbar navbar-expand-lg navbar-light">
            <div class="container">
                <a class="navbar-brand d-flex align-items-center" href="index.html">
                    <img src="./img/nepalgovlogo.png" alt="चन्दननाथ नगरपालिका Logo" class="municipality-logo img-fluid" style="max-height: 50px;">
                    <div class="ms-2 text-wrap">
                        <span style="display: block;">चन्दननाथ नगरपालिका</span>
                        <span >वडा नम्बर ४</span>
                    </div>
                </a>
                <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNav"
                    aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
                    <span class="navbar-toggler-icon"></span>
                </button>
                <div class="collapse navbar-collapse" id="navbarNav">
                    <ul class="navbar-nav ml-auto">
                        <li class="nav-item"><a class="nav-link" href="about.html">हाम्रो बारेमा</a></li>
                        <li class="nav-item"><a class="nav-link" href="service.html">सेवाहरू</a></li>
                        <li class="nav-item"><a class="nav-link" href="contact.html">सम्पर्क</a></li>
                        <li class="nav-item"><a class="nav-link" href="notice.html">सूचनाहरू</a></li>
                        <li class="nav-item"><a class="nav-link" href="galley.html">ग्यालेरी</a></li>
                    </ul>
                    <div class="flag-container">
                        <img src="https://kathmandu.gov.np/wp-content/themes/kmc-theme/images/flag-nepal.gif"
                            alt="Nepali Flag" class="nepali-flag">
                    </div>
                </div>
            </div>
        </nav>
    </header>
    <!-- <section class="notices-section">
        <div class="container">
            <h1 class="section-title text-center">सूचनाहरू</h1>
            <div class="row">
                <div class="col-lg-12">
                    <div class="notices-list">
                        <div class="notice-item">
                            <h3>सूचना १: नगरपालिकाको नयाँ नीति</h3>
                            <p>काठमाडौँ महानगरपालिकाले नयाँ नीति लागू गरेको छ जसले स्थानीय विकासलाई प्राथमिकता दिनेछ। थप जानकारीको लागि हाम्रो वेबसाइटमा जानुहोस्।</p>
                        </div>
                        <div class="notice-item">
                            <h3>सूचना २: स्वास्थ्य शिविरको आयोजना</h3>
                            <p>हामीले आगामी हप्ता स्वास्थ्य शिविरको आयोजना गर्दैछौं। सबै नागरिकलाई सहभागी हुन आमन्त्रित गर्दछौं।</p>
                        </div>
                        <div class="notice-item">
                            <h3>सूचना ३: सफाई अभियान</h3>
                            <p>नगरपालिकाले सफाई अभियानको आयोजना गर्ने निर्णय गरेको छ। कृपया सबैले यसमा सहयोग गर्नुहोस्।</p>
                        </div>
                      
                    </div>
                </div>
            </div>
        </div>
    </section> -->
    <section class="notices-section">
        <div class="container">
            <h1 class="section-title text-center">सूचनाहरू</h1>
            <div class="row">
                <div class="col-lg-12">
                    <!-- <div class="notices-list" id="noticesList">
                        
                        <div id="pagination" class="text-center mt-3"></div> -->
                        <div id="noticesList"></div>
                        <div id="pagination" class="text-center mt-3"></div>
                        
                    </div>
                </div>
            </div>
        </div>
    </section>
    <footer id="site-footer" class="site-footer" role="contentinfo">
        <div class="wrapper">
            <div class="footer-container">
                <div class="contact">
                    <h1>चन्दननाथ नगरपालिका,<br>वडा नम्बर ४, कर्णाली प्रदेश</h1>
                    <div class="contact-box">
                        <div>
                            <span class="span-wrap">
                                <img src="https://kathmandu.gov.np/wp-content/themes/kmc-theme/images/ic_phone.svg"
                                    alt="Phone Icon">
                                <span>फोन:</span>
                            </span>
                            <span class="span-wrap">
                                <img src="https://kathmandu.gov.np/wp-content/themes/kmc-theme/images/ic_phone.svg"
                                    alt="Phone Icon">
                                <span>फोन:</span>
                            </span>
                            <span class="span-wrap">
                                <img src="https://kathmandu.gov.np/wp-content/themes/kmc-theme/images/ic_phone.svg"
                                    alt="Phone Icon">
                                <span>फोन:</span>
                            </span>
                            <span class="span-wrap">
                                <img src="https://kathmandu.gov.np/wp-content/themes/kmc-theme/images/ic_mail.svg"
                                    alt="Email Icon">
                                <span>ईमेल:</span>
                            </span>
                        </div>
                        <div>
                            <small>०८७ ५२००१२७ </small><br>
                            <small></small><br>
                            <small></small><br>
                            <small><br><br></small>
                        </div>
                    </div>
                </div>

                <div class="google-map">
                    <h1>गुगल म्याप</h1>
                    <div class="mapouter">
                        <div class="gmap_canvas">
                            <iframe src="https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d2654.686882364102!2d82.18371040108148!3d29.276409334130154!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x39a32b647c16597b%3A0x305f34a81e318b0d!2sKhalanga%2C%20Chandannath%2021200!5e0!3m2!1sen!2snp!4v1734169188969!5m2!1sen!2snp" width="600" height="450" style="border:0;" allowfullscreen="" loading="lazy" referrerpolicy="no-referrer-when-downgrade"></iframe>
                        </div>
                    </div>
                </div>
                <div class="links">
                    <h1>महत्वपूर्ण लिंक</h1>
                    <ul>
                        <li><a href="http://ebps.kathmandu.gov.np/Hom/ReferenceDoc" class="link-with-icon">भवन निर्माण
                                सम्बन्धी कार्यविधि/मापदण्डहरु</a></li>
                        <li><a href="https://www.moha.gov.np/" class="link-with-icon">गृह मन्त्रालय</a></li>
                        <li><a href="https://www.mofaga.gov.np/" class="link-with-icon">सङ्घीय मामिला तथा सामान्य
                                प्रशासन मन्त्रालय</a></li>
                        <li><a href="http://www.ocmcm.bagamati.gov.np/" class="link-with-icon">मुख्यमन्त्री तथा
                                मन्त्रिपरिषद्को कार्यालय</a></li>
                        <li><a href="https://daokathmandu.moha.gov.np/" class="link-with-icon">जिल्ला प्रशासन कार्यालय,
                                काठमाडौँ</a></li>
                        <li><a href="https://www.pmep.gov.np/" class="link-with-icon">प्रधानमन्त्री रोजगार कार्यक्रम</a>
                        </li>
                    </ul>
                </div>
            </div>

            <div class="bottom-footer">
                <p>© 2024 चन्दननाथ नगरपालिकाको - वडा नम्बर ४ </p>
                <div class="social-icons">
                    <!-- Social media icons can be added here -->
                </div>
            </div>
        </div>
    </footer>
    <script>
        let allNotices = [];
        let currentPage = 1;
        const noticesPerPage = 10;
        
        async function fetchNotices() {
            try {
                const response = await fetch("http://localhost:3200/allnotices");
        
                if (!response.ok) {
                    throw new Error(`HTTP error! Status: ${response.status}`);
                }
        
                const data = await response.json();
                console.log("Response from backend:", data);
        
                if (data.success) {
                    allNotices = data.notices;
                    currentPage = 1; // Reset to first page on fetch
                    renderNotices();
                    renderPagination();
                } else {
                    alert("Failed to fetch notices.");
                }
            } catch (error) {
                console.error("Error fetching notices:", error);
                alert("Failed to fetch notices. Please try again later.");
            }
        }
        
        function renderNotices() {
            const noticesList = document.getElementById("noticesList");
            noticesList.innerHTML = "";
        
            const startIndex = (currentPage - 1) * noticesPerPage;
            const endIndex = startIndex + noticesPerPage;
            const paginatedNotices = allNotices.slice(startIndex, endIndex);
        
            paginatedNotices.forEach(notice => {
                const noticeItem = document.createElement("div");
                noticeItem.classList.add("notice-item");
        
                noticeItem.innerHTML = `
                    <h3>${notice.title}</h3>
                    <p>${notice.description}</p>
                    <small class="text-muted">${new Date(notice.createdAt).toLocaleString()}</small>
                `;
        
                noticesList.appendChild(noticeItem);
            });
        }
        
        function renderPagination() {
            const paginationContainer = document.getElementById("pagination");
            paginationContainer.innerHTML = "";
        
            const totalPages = Math.ceil(allNotices.length / noticesPerPage);
            if (totalPages <= 1) return; // Hide pagination if only 1 page
        
            // Previous Button
            const prevButton = document.createElement("button");
            prevButton.textContent = "Previous";
            prevButton.classList.add("btn", "btn-primary", "mx-1");
            prevButton.disabled = currentPage === 1;
            prevButton.addEventListener("click", () => {
                if (currentPage > 1) {
                    currentPage--;
                    renderNotices();
                    renderPagination();
                }
            });
            paginationContainer.appendChild(prevButton);
        
            // Page Number Buttons
            for (let i = 1; i <= totalPages; i++) {
                const pageButton = document.createElement("button");
                pageButton.textContent = i;
                pageButton.classList.add("btn", "btn-secondary", "mx-1");
                if (i === currentPage) {
                    pageButton.classList.add("active");
                }
                pageButton.addEventListener("click", () => {
                    currentPage = i;
                    renderNotices();
                    renderPagination();
                });
                paginationContainer.appendChild(pageButton);
            }
        
            // Next Button
            const nextButton = document.createElement("button");
            nextButton.textContent = "Next";
            nextButton.classList.add("btn", "btn-primary", "mx-1");
            nextButton.disabled = currentPage === totalPages;
            nextButton.addEventListener("click", () => {
                if (currentPage < totalPages) {
                    currentPage++;
                    renderNotices();
                    renderPagination();
                }
            });
            paginationContainer.appendChild(nextButton);
        }
        
        // Fetch notices when the page loads
        document.addEventListener("DOMContentLoaded", fetchNotices);
        </script>
        
        
    <script src='https://code.jquery.com/jquery-3.5.1.slim.min.js'></script>
    <script src='https://cdn.jsdelivr.net/npm/@popperjs/core@2.9.3/dist/umd/popper.min.js'></script>
    <script src='https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js'></script>
</body>
</html>


